/*! lazyload - v2.1.1 - 2018-04-01
 * https://github.com/13twelve/lazyload
 * Copyright (c) 2018
 * License: MIT
 * Author: Mike Byrne @13twelve https://github.com/13twelve
 */(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof exports=="object"?module.exports=e():t.lazyLoad=e()})(this,function(){var s={pageUpdatedEventName:"page:updated",elements:"img[data-src], img[data-srcset], source[data-srcset], iframe[data-src], video[data-src], [data-lazyload]",rootMargin:"0px",threshold:0,maxFrameCount:10},l,i,t,o,n,p,e=[];function f(n){var t=[],e=0;for(t=[],e=n.length;e;)t[--e]=n[e];return t}function h(e){e=e.tagName==="SOURCE"?e.parentNode:e;var t=e.getBoundingClientRect();return t.bottom>0&&t.right>0&&t.left<(window.innerWidth||document.documentElement.clientWidth)&&t.top<(window.innerHeight||document.documentElement.clientHeight)}function r(e){e.removeAttribute("data-src"),e.removeAttribute("data-srcset"),e.removeAttribute("data-lazyload")}function a(){this.removeEventListener("load",a),r(this)}function c(e){var t=e.getAttribute("data-srcset"),n=e.getAttribute("data-src"),s=e.getAttribute("data-lazyload")!==null;t&&(e.setAttribute("srcset",t),window.picturefill&&window.picturefill({elements:[e]})),n&&(e.src=n),s&&(e.setAttribute("data-lazyloaded",''),e.removeEventListener("load",a),r(e))}function m(s){t===0&&o.disconnect();for(var n=0,e;n<s.length;n++)e=s[n],e.intersectionRatio>0&&(t--,o.unobserve(e.target),e.target.addEventListener("load",a,!1),c(e.target))}function d(){if(n==="really-old"){t=e.length;for(u=0;u<t;u++)e[u]&&(c(e[u]),r(e[u]));e=[]}else if(n==="old"){if(i===s.maxFrameCount){t=e.length;for(u=0;u<t;u++)if(e[u]&&e[u].lazyloaded===void 0&&h(e[u])){var u,f=e[u];e[u]=void 0,f.lazyloaded=!0,f.addEventListener("load",a,!1),c(f)}for(u=0;u<t;u++)e[u]===void 0&&e.splice(u,1);t=e.length,i=-1}t>0&&(i++,l=window.requestAnimationFrame(d))}else if(n==="new"){o=new IntersectionObserver(m,{rootMargin:s.rootMargin,threshold:s.threshold}),t=e.length;for(u=0;u<t;u++)e[u]&&e[u].lazyloaded===void 0&&o.observe(e[u])}}function u(){if(n==="old")try{cancelAnimationFrame(l)}catch(e){}else if(n==="new")try{o.disconnect()}catch(e){}e=f(document.querySelectorAll(s.elements)),t=e.length,i=s.maxFrameCount,d()}return p=function(e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);!("addEventListener"in window)||!window.requestAnimationFrame||typeof document.body.getBoundingClientRect===void 0?n="really-old":"IntersectionObserver"in window?n="new":n="old",u(),s.pageUpdatedEventName&&document.addEventListener(s.pageUpdatedEventName,u,!0)},p}),lazyLoad()